{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from '@/axios';\nexport default {\n  name: 'UserDashboard',\n  data() {\n    return {\n      username: '',\n      signature: '',\n      blog: '',\n      isEditingSignature: false,\n      editSignatureText: '',\n      isEditingBlog: false,\n      editBlogText: ''\n    };\n  },\n  created() {\n    this.fetchUserInfo();\n  },\n  methods: {\n    fetchUserInfo() {\n      axios.get('/profile/me').then(response => {\n        if (response.data.code === 200) {\n          this.username = response.data.data.username;\n          this.signature = response.data.data.signature;\n          this.blog = response.data.data.blog;\n        } else {\n          this.$message.error(response.data.message || '无法获取用户信息');\n        }\n      }).catch(() => {\n        this.$message.error('无法获取用户信息');\n      });\n    },\n    editSignature() {\n      this.isEditingSignature = true;\n      this.editSignatureText = this.signature;\n    },\n    saveSignature() {\n      if (this.editSignatureText.trim() === '') {\n        this.$message.error('签名不能为空');\n        return;\n      }\n      axios.put('/profile/me', {\n        signature: this.editSignatureText\n      }).then(response => {\n        if (response.data.code === 200) {\n          this.signature = response.data.data.signature;\n          this.isEditingSignature = false;\n          this.$message.success('签名更新成功');\n        } else {\n          this.$message.error(response.data.message || '更新签名失败');\n        }\n      }).catch(() => {\n        this.$message.error('更新签名失败');\n      });\n    },\n    cancelEditSignature() {\n      this.isEditingSignature = false;\n      this.editSignatureText = '';\n    },\n    editBlog() {\n      this.isEditingBlog = true;\n      this.editBlogText = this.blog;\n    },\n    saveBlog() {\n      if (this.editBlogText.trim() === '') {\n        this.$message.error('博客内容不能为空');\n        return;\n      }\n      axios.put('/profile/me', {\n        blog: this.editBlogText\n      }).then(response => {\n        if (response.data.code === 200) {\n          this.blog = response.data.data.blog;\n          this.isEditingBlog = false;\n          this.$message.success('博客更新成功');\n        } else {\n          this.$message.error(response.data.message || '更新博客失败');\n        }\n      }).catch(() => {\n        this.$message.error('更新博客失败');\n      });\n    },\n    cancelEditBlog() {\n      this.isEditingBlog = false;\n      this.editBlogText = '';\n    },\n    initStarryBackground() {\n      let canvas = document.getElementById('starry');\n      canvas.width = document.documentElement.clientWidth;\n      canvas.height = document.documentElement.clientHeight;\n      let ctx = canvas.getContext('2d');\n      class Star {\n        constructor() {\n          this.x = randNum(3, canvas.width - 3);\n          this.y = randNum(3, canvas.height - 3);\n          this.r = randNum(1, 3);\n          this.color = randColor();\n          this.speedX = randNum(-2, 2) * 0.2;\n          this.speedY = randNum(-3, 3) * 0.2;\n        }\n        draw() {\n          ctx.beginPath();\n          ctx.globalAlpha = 1;\n          ctx.fillStyle = this.color;\n          ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);\n          ctx.fill();\n        }\n        move() {\n          this.x += this.speedX;\n          this.y += this.speedY;\n          if (this.x <= 3 || this.x >= canvas.width - 3) this.speedX *= -1;\n          if (this.y <= 3 || this.y >= canvas.height - 3) this.speedY *= -1;\n        }\n      }\n      let stars = [];\n      for (let i = 0; i < 150; i++) {\n        let star = new Star();\n        stars.push(star);\n      }\n      let mouseX, mouseY;\n      canvas.onmousemove = function (event) {\n        mouseX = event.offsetX;\n        mouseY = event.offsetY;\n      };\n      function mouseLine() {\n        for (var i = 0; i < stars.length; i++) {\n          if (Math.sqrt(Math.pow(stars[i].x - mouseX, 2) + Math.pow(stars[i].y - mouseY, 2)) < 120) {\n            ctx.beginPath();\n            ctx.moveTo(stars[i].x, stars[i].y);\n            ctx.lineTo(mouseX, mouseY);\n            ctx.strokeStyle = \"white\";\n            ctx.globalAlpha = 0.8;\n            ctx.stroke();\n          }\n        }\n      }\n      function drawLine() {\n        for (var i = 0; i < stars.length; i++) {\n          stars[i].draw();\n          stars[i].move();\n        }\n      }\n      function main() {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        mouseLine();\n        drawLine();\n        window.requestAnimationFrame(main);\n      }\n      main();\n      function randNum(m, n) {\n        return Math.floor(Math.random() * (n - m + 1) + m);\n      }\n      function randColor() {\n        return 'rgb(' + randNum(0, 255) + ',' + randNum(0, 255) + ',' + randNum(0, 255) + ')';\n      }\n    }\n  },\n  mounted() {\n    this.initStarryBackground();\n  }\n};","map":{"version":3,"names":["axios","name","data","username","signature","blog","isEditingSignature","editSignatureText","isEditingBlog","editBlogText","created","fetchUserInfo","methods","get","then","response","code","$message","error","message","catch","editSignature","saveSignature","trim","put","success","cancelEditSignature","editBlog","saveBlog","cancelEditBlog","initStarryBackground","canvas","document","getElementById","width","documentElement","clientWidth","height","clientHeight","ctx","getContext","Star","constructor","x","randNum","y","r","color","randColor","speedX","speedY","draw","beginPath","globalAlpha","fillStyle","arc","Math","PI","fill","move","stars","i","star","push","mouseX","mouseY","onmousemove","event","offsetX","offsetY","mouseLine","length","sqrt","pow","moveTo","lineTo","strokeStyle","stroke","drawLine","main","clearRect","window","requestAnimationFrame","m","n","floor","random","mounted"],"sources":["src/components/Dashboard.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\" class=\"dashboard-container\">\r\n    <canvas id=\"starry\"></canvas>\r\n    <div class=\"dashboard\">\r\n      <h1>欢迎，{{ username }}！</h1>\r\n      <p>这是您的仪表盘。</p>\r\n\r\n      <!-- 个人签名 -->\r\n      <div class=\"section\">\r\n        <h2>个人签名</h2>\r\n        <p v-if=\"!isEditingSignature\">{{ signature || '您还没有设置签名。' }}</p>\r\n        <el-button v-else type=\"primary\" @click=\"saveSignature\" class=\"large-button\">保存</el-button>\r\n        <el-button v-if=\"!isEditingSignature\" type=\"primary\" @click=\"editSignature\" class=\"large-button\">编辑签名</el-button>\r\n        <el-button v-else @click=\"cancelEditSignature\" class=\"large-button\">取消</el-button>\r\n        <el-input\r\n          v-if=\"isEditingSignature\"\r\n          v-model=\"editSignatureText\"\r\n          placeholder=\"请输入您的签名\"\r\n          clearable\r\n        ></el-input>\r\n      </div>\r\n\r\n      <!-- 个人博客 -->\r\n      <div class=\"section\">\r\n        <h2>个人博客</h2>\r\n        <p v-if=\"!isEditingBlog\">{{ blog || '您还没有撰写博客。' }}</p>\r\n        <el-button v-else type=\"primary\" @click=\"saveBlog\" class=\"large-button\">保存</el-button>\r\n        <el-button v-if=\"!isEditingBlog\" type=\"primary\" @click=\"editBlog\" class=\"large-button\">编辑博客</el-button>\r\n        <el-button v-else @click=\"cancelEditBlog\" class=\"large-button\">取消</el-button>\r\n        <el-input\r\n          type=\"textarea\"\r\n          v-if=\"isEditingBlog\"\r\n          v-model=\"editBlogText\"\r\n          placeholder=\"请输入您的博客内容\"\r\n          clearable\r\n          rows=\"6\"\r\n        ></el-input>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/axios';\r\n\r\nexport default {\r\n  name: 'UserDashboard',\r\n  data() {\r\n    return {\r\n      username: '',\r\n      signature: '',\r\n      blog: '',\r\n      isEditingSignature: false,\r\n      editSignatureText: '',\r\n      isEditingBlog: false,\r\n      editBlogText: ''\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchUserInfo();\r\n  },\r\n  methods: {\r\n    fetchUserInfo() {\r\n      axios.get('/profile/me')\r\n        .then(response => {\r\n          if (response.data.code === 200) {\r\n            this.username = response.data.data.username;\r\n            this.signature = response.data.data.signature;\r\n            this.blog = response.data.data.blog;\r\n          } else {\r\n            this.$message.error(response.data.message || '无法获取用户信息');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message.error('无法获取用户信息');\r\n        });\r\n    },\r\n    editSignature() {\r\n      this.isEditingSignature = true;\r\n      this.editSignatureText = this.signature;\r\n    },\r\n    saveSignature() {\r\n      if (this.editSignatureText.trim() === '') {\r\n        this.$message.error('签名不能为空');\r\n        return;\r\n      }\r\n      axios.put('/profile/me', { signature: this.editSignatureText })\r\n        .then(response => {\r\n          if (response.data.code === 200) {\r\n            this.signature = response.data.data.signature;\r\n            this.isEditingSignature = false;\r\n            this.$message.success('签名更新成功');\r\n          } else {\r\n            this.$message.error(response.data.message || '更新签名失败');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message.error('更新签名失败');\r\n        });\r\n    },\r\n    cancelEditSignature() {\r\n      this.isEditingSignature = false;\r\n      this.editSignatureText = '';\r\n    },\r\n    editBlog() {\r\n      this.isEditingBlog = true;\r\n      this.editBlogText = this.blog;\r\n    },\r\n    saveBlog() {\r\n      if (this.editBlogText.trim() === '') {\r\n        this.$message.error('博客内容不能为空');\r\n        return;\r\n      }\r\n      axios.put('/profile/me', { blog: this.editBlogText })\r\n        .then(response => {\r\n          if (response.data.code === 200) {\r\n            this.blog = response.data.data.blog;\r\n            this.isEditingBlog = false;\r\n            this.$message.success('博客更新成功');\r\n          } else {\r\n            this.$message.error(response.data.message || '更新博客失败');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message.error('更新博客失败');\r\n        });\r\n    },\r\n    cancelEditBlog() {\r\n      this.isEditingBlog = false;\r\n      this.editBlogText = '';\r\n    },\r\n    initStarryBackground() {\r\n      let canvas = document.getElementById('starry');\r\n      canvas.width = document.documentElement.clientWidth;\r\n      canvas.height = document.documentElement.clientHeight;\r\n      let ctx = canvas.getContext('2d');\r\n\r\n      class Star {\r\n        constructor() {\r\n          this.x = randNum(3, canvas.width - 3);\r\n          this.y = randNum(3, canvas.height - 3);\r\n          this.r = randNum(1, 3);\r\n          this.color = randColor();\r\n          this.speedX = randNum(-2, 2) * 0.2;\r\n          this.speedY = randNum(-3, 3) * 0.2;\r\n        }\r\n        draw() {\r\n          ctx.beginPath();\r\n          ctx.globalAlpha = 1;\r\n          ctx.fillStyle = this.color;\r\n          ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);\r\n          ctx.fill();\r\n        }\r\n        move() {\r\n          this.x += this.speedX;\r\n          this.y += this.speedY;\r\n          if (this.x <= 3 || this.x >= canvas.width - 3) this.speedX *= -1;\r\n          if (this.y <= 3 || this.y >= canvas.height - 3) this.speedY *= -1;\r\n        }\r\n      }\r\n\r\n      let stars = [];\r\n      for (let i = 0; i < 150; i++) {\r\n        let star = new Star();\r\n        stars.push(star);\r\n      }\r\n\r\n      let mouseX, mouseY;\r\n      canvas.onmousemove = function (event) {\r\n        mouseX = event.offsetX;\r\n        mouseY = event.offsetY;\r\n      }\r\n\r\n      function mouseLine() {\r\n        for (var i = 0; i < stars.length; i++) {\r\n          if (Math.sqrt(Math.pow((stars[i].x - mouseX), 2) + Math.pow((stars[i].y - mouseY), 2)) < 120) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(stars[i].x, stars[i].y);\r\n            ctx.lineTo(mouseX, mouseY);\r\n            ctx.strokeStyle = \"white\";\r\n            ctx.globalAlpha = 0.8;\r\n            ctx.stroke();\r\n          }\r\n        }\r\n      }\r\n\r\n      function drawLine() {\r\n        for (var i = 0; i < stars.length; i++) {\r\n          stars[i].draw();\r\n          stars[i].move();\r\n        }\r\n      }\r\n\r\n      function main() {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        mouseLine();\r\n        drawLine();\r\n        window.requestAnimationFrame(main);\r\n      }\r\n\r\n      main();\r\n\r\n      function randNum(m, n) {\r\n        return Math.floor(Math.random() * (n - m + 1) + m);\r\n      }\r\n\r\n      function randColor() {\r\n        return 'rgb(' + randNum(0, 255) + ',' + randNum(0, 255) + ',' + randNum(0, 255) + ')';\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initStarryBackground();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-family: 'KaiTi', serif;\r\n}\r\nbody,\r\nhtml {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n#starry {\r\n  position: absolute;\r\n  background-color: #000000;\r\n}\r\n.dashboard-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.dashboard {\r\n  width: 800px;\r\n  padding: 30px;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\r\n  border-radius: 10px;\r\n  z-index: 1;\r\n  color: #fff;\r\n}\r\n\r\n.section {\r\n  margin-bottom: 40px;\r\n  padding: 20px;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.section h2 {\r\n  margin-bottom: 10px;\r\n  color: #fff;\r\n}\r\n\r\n.section p {\r\n  font-size: 16px;\r\n  margin-bottom: 10px;\r\n  color: #fff;\r\n}\r\n\r\n.section .el-button {\r\n  margin-right: 10px;\r\n  padding: 15px 20px;\r\n  font-size: 16px;\r\n  border-radius: 20px;\r\n}\r\n\r\n.el-input {\r\n  margin-top: 10px;\r\n  width: 100%;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}